(function(a){var b=function(b,c){this.$element=a(b),this.options=c,this.enabled=!0};b.prototype={valuebox:function(){return this.$valuebox||(this.$valuebox=a('<div class="advanced-selectbox-values"></div>').css({display:"block"}),this.$element.before(this.$valuebox)),this.$valuebox},show:function(){var a;a=this.valuebox(),a.hide(),this.$element.show()},hide:function(){var a;this.getSelectedValues(),a=this.valuebox(),a.show(),this.$element.hide()},getSelectedValues:function(){var b=this.$element,c=this.options,d,e;d=this.valuebox(),d.empty(),e=b.find("option:selected").length,e==0&&d.append(a("<div></div>").html("None")),b.find("option:selected").each(function(b){if(b>c.show)return!1;var f=a(this).text().replace(/^\s*|\s*$/,"");f==""&&e==1&&(f="None"),b==c.show&&e>c.show+1&&(f="Plus <b>"+(e-c.show)+"</b> additional item"+(e>1?"s":""));var g=a("<div></div>").html(f);d.append(g)})},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.advancedselectbox=function(c){return a.fn.advancedselectbox.init.call(this,c,b,"advancedselectbox"),this},a.fn.advancedselectbox.init=function(b,c,d){function i(e){var f=a.data(e,d);return f||(f=new c(e,a.fn.advancedselectbox.elementOptions(e,b)),a.data(e,d,f),f.hide()),f}function j(){var c=i(a(this).children("select")[0]);c.state="in",setTimeout(function(){c.state=="in"&&c.show()},b.delayIn)}function k(){var c=i(a(this).children("select")[0]);c.state="out",setTimeout(function(){c.state=="out"&&c.hide()},b.delayOut)}var e,f,g,h;return b===!0?this.data(d):typeof b=="string"?(e=this.data(d),e&&e[b](),this):(b=a.extend({},a.fn[d].defaults,b),b.live||this.each(function(){i(this)}),f=b.live?"live":"bind",this.parent()[f]("mouseenter",j)[f]("mouseleave",k),this)},a.fn.advancedselectbox.AdvancedSelectbox=b,a.fn.advancedselectbox.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.advancedselectbox.defaults={animate:!0,delayIn:100,delayOut:100,live:!1,show:3}})(window.jQuery);